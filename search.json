[{"path":"https://ryo-asashi.github.io/midnight/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 midnight authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https://ryo-asashi.github.io/midnight/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Ryoichi Asashiba. Author, maintainer.","code":""},{"path":"https://ryo-asashi.github.io/midnight/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Asashiba R (2025). midnight: Tidymodels Interface 'midr' Package. R package version 0.1.0.905, https://github.com/ryo-asashi/midnight.","code":"@Manual{,   title = {midnight: A Tidymodels Interface for the 'midr' Package},   author = {Ryoichi Asashiba},   year = {2025},   note = {R package version 0.1.0.905},   url = {https://github.com/ryo-asashi/midnight}, }"},{"path":"https://ryo-asashi.github.io/midnight/index.html","id":"midnight-","dir":"","previous_headings":"","what":"A Tidymodels Interface for the midr Package","title":"A Tidymodels Interface for the midr Package","text":"‘midnight’ package implements ‘parsnip’ engine ‘midr’ package, allowing users seamlessly fit, tune, evaluate MID (Maximum Interpretation Decomposition) models ‘tidymodels’ workflows. Development augmentation package driven research “Moonlight Seminar 2025”, collaborative study group actuaries Institute Actuaries Japan focused advancing practical applications interpretable models.","code":""},{"path":"https://ryo-asashi.github.io/midnight/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"A Tidymodels Interface for the midr Package","text":"can install development version midnight GitHub :","code":"# install.packages(\"pak\") pak::pak(\"ryo-asashi/midnight\")"},{"path":"https://ryo-asashi.github.io/midnight/index.html","id":"fit-mid-surrogate-models-using-parsnip","dir":"","previous_headings":"","what":"Fit MID Surrogate Models using ‘parsnip’","title":"A Tidymodels Interface for the midr Package","text":"basic example shows solve common problem:","code":"library(tidymodels) library(midr) library(midnight) library(gridExtra) library(ISLR2) # split dataset into training / validating subsets set.seed(42) usecol <- c(\"mnth\", \"hr\", \"workingday\", \"weathersit\",             \"temp\", \"hum\", \"windspeed\", \"bikers\") all <- ISLR2::Bikeshare |>   select(all_of(usecol)) |>   mutate(workingday = as.factor(workingday)) holdout <- initial_split(all, prop = .5) train <- training(holdout) valid <- testing(holdout) # create a first-order mid surrogate model mid_spec_1 <- mid_reg() mid_spec_1 #> mid reg Model Specification (regression) #>  #> Computational engine: midr # fit the model mid_1 <- mid_spec_1 %>%   fit(bikers ~ ., train) mid_1 #> parsnip model object #>  #>  #> Call: #> interpret(x = x, y = y, weights = weights, k = k, lambda = penalty) #>  #> Intercept: 146.06 #>  #> Main Effects: #> 7 main effect terms #>  #> Uninterpreted Variation Ratio: 0.30041 # evaluate the model augment(mid_1, new_data = valid) %>%   rmse(truth = bikers, estimate = .pred) #> # A tibble: 1 × 3 #>   .metric .estimator .estimate #>   <chr>   <chr>          <dbl> #> 1 rmse    standard        72.9 grid.arrange(nrow = 2,  ggmid(mid.importance(mid_1$fit), theme = \"moon\", max.nterms = 15),  ggmid(mid_1$fit, \"hr\"),  ggmid(mid_1$fit, \"temp\"),  ggmid(mid_1$fit, \"mnth\") ) # create a second-order mid surrogate model via \"custom formula\" mid_spec_2 <- mid_reg(   penalty = 0.000001, custom_formula = bikers ~ .^2 ) mid_spec_2 #> mid reg Model Specification (regression) #>  #> Main Arguments: #>   penalty = 1e-06 #>   custom_formula = bikers ~ .^2 #>  #> Computational engine: midr # fit the model mid_2 <- mid_spec_2 %>%   fit(bikers ~ ., train) # pass original data on to interpret() mid_2 #> parsnip model object #>  #>  #> Call: #> interpret(formula = bikers ~ .^2, data = data, weights = weights, #>  k = k, lambda = penalty) #>  #> Intercept: 146.06 #>  #> Main Effects: #> 7 main effect terms #>  #> Interactions: #> 21 interaction terms #>  #> Uninterpreted Variation Ratio: 0.069436 # evaluate the model augment(mid_2, new_data = valid) %>%   rmse(truth = bikers, estimate = .pred) #> # A tibble: 1 × 3 #>   .metric .estimator .estimate #>   <chr>   <chr>          <dbl> #> 1 rmse    standard        44.3 grid.arrange(nrow = 2,  ggmid(mid.importance(mid_2$fit), theme = \"moon\", max.nterms = 15),  ggmid(mid_2$fit, \"hr\"),  ggmid(mid_2$fit, \"temp\"),  ggmid(mid_2$fit, \"hr:workingday\", type = \"data\", data = valid,        main.effects = TRUE, theme = \"moonlit\") ) par.midr() persp(mid_2$fit, \"temp:hr\", theta = 50, phi = 20, shade = .5)"},{"path":"https://ryo-asashi.github.io/midnight/index.html","id":"tune-mid-surrogate-models-using-tune","dir":"","previous_headings":"","what":"Tune MID Surrogate Models using ‘tune’","title":"A Tidymodels Interface for the midr Package","text":"","code":"# create a second-order mid surrogate model via \"custom formula\" mid_spec <- mid_reg(   params_main = tune(),   params_inter = tune(),   penalty = tune(),   custom_formula = bikers ~ .^2 ) %>%   set_engine(\"midr\", verbosity = 0) mid_spec #> mid reg Model Specification (regression) #>  #> Main Arguments: #>   penalty = tune() #>   params_main = tune() #>   params_inter = tune() #>   custom_formula = bikers ~ .^2 #>  #> Engine-Specific Arguments: #>   verbosity = 0 #>  #> Computational engine: midr # define a cross validation method set.seed(42) cv <- vfold_cv(train, v = 2) # execute the hyperparameter tuning tune_res <- mid_spec %>%   tune_bayes(     bikers ~ .,     resamples = cv,     iter = 50   ) tune_best <- select_best(tune_res, metric = \"rmse\") tune_best #> # A tibble: 1 × 4 #>   penalty params_main params_inter .config #>     <dbl>       <int>        <int> <chr>   #> 1   0.668          70            5 Iter23 # create a second-order mid surrogate model via \"custom formula\" mid_spec <- mid_reg(   params_main = tune_best$params_main,   params_inter = tune_best$params_inter,   penalty = tune_best$penalty,   custom_formula = bikers ~ .^2 ) %>%   set_engine(\"midr\", verbosity = 0, singular.ok = TRUE) mid_spec #> mid reg Model Specification (regression) #>  #> Main Arguments: #>   penalty = tune_best$penalty #>   params_main = tune_best$params_main #>   params_inter = tune_best$params_inter #>   custom_formula = bikers ~ .^2 #>  #> Engine-Specific Arguments: #>   verbosity = 0 #>   singular.ok = TRUE #>  #> Computational engine: midr # fit the model mid_tune <- mid_spec %>%   fit(bikers ~ ., train) # pass original data on to interpret() mid_tune #> parsnip model object #>  #>  #> Call: #> interpret(formula = bikers ~ .^2, data = data, weights = weights, #>  verbosity = ..1, k = k, lambda = penalty, singular.ok = ..2) #>  #> Intercept: 146.06 #>  #> Main Effects: #> 7 main effect terms #>  #> Interactions: #> 21 interaction terms #>  #> Uninterpreted Variation Ratio: 0.080808 # evaluate the model augment(mid_tune, new_data = valid) %>%   rmse(truth = bikers, estimate = .pred) #> # A tibble: 1 × 3 #>   .metric .estimator .estimate #>   <chr>   <chr>          <dbl> #> 1 rmse    standard        43.0 grid.arrange(nrow = 2,  ggmid(mid.importance(mid_tune$fit), theme = \"moon\", max.nterms = 15),  ggmid(mid_tune$fit, \"hr\"),  ggmid(mid_tune$fit, \"temp\"),  ggmid(mid_tune$fit, \"hr:workingday\", type = \"data\", data = valid,        main.effects = TRUE, theme = \"moonlit\") ) par.midr() persp(mid_tune$fit, \"temp:hr\", theta = 50, phi = 20, shade = .5)"},{"path":"https://ryo-asashi.github.io/midnight/reference/mid_reg.html","id":null,"dir":"Reference","previous_headings":"","what":"MID Regression — mid_reg","title":"MID Regression — mid_reg","text":"mid_reg() defines model can predict numeric values predictors using set functions two predictors. function can fit regression models.","code":""},{"path":"https://ryo-asashi.github.io/midnight/reference/mid_reg.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"MID Regression — mid_reg","text":"","code":"mid_reg(   mode = \"regression\",   engine = \"midr\",   params_main = NULL,   params_inter = NULL,   penalty = NULL,   custom_formula = NULL )  fit_mid_reg(   x,   y,   weights = NULL,   params_main = NA,   params_inter = NA,   penalty = 0,   custom_formula = NULL,   ... )"},{"path":"https://ryo-asashi.github.io/midnight/reference/mid_reg.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"MID Regression — mid_reg","text":"mode single character string type model. params_main integer maximum number sample points model main effects. .e., k main effects interpret(). params_inter integer maximum number sample points model interaction effects. .e., k interactions interpret(). penalty non-negative number representing total amount regularization. .e., lambda interpret(). custom_formula formula object. passed, fit() internally uses interpret.formula() specified formula, otherwise uses interpret.default(). .e., `formula` interpret.formula(). x data frame matrix predictor variables. y vector target variable. weights optional vector case weights. ... arguments passed midr::interpret().","code":""},{"path":"https://ryo-asashi.github.io/midnight/reference/mid_reg.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"MID Regression — mid_reg","text":"mid_reg model specification.","code":""},{"path":"https://ryo-asashi.github.io/midnight/reference/mid_reg.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"MID Regression — mid_reg","text":"function main specification parsnip model. underlying fitting performed fit_mid_reg(), helper function connects fit() midr::interpret() function.","code":""},{"path":[]},{"path":"https://ryo-asashi.github.io/midnight/reference/midnight-package.html","id":null,"dir":"Reference","previous_headings":"","what":"midnight: A Tidymodels Interface for the 'midr' Package — midnight-package","title":"midnight: A Tidymodels Interface for the 'midr' Package — midnight-package","text":"'midnight' package implements 'parsnip' engine 'midr' package, allowing users seamlessly fit, tune, evaluate MID (Maximum Interpretation Decomposition) models 'tidymodels' workflows. Development augmentation package driven research \"Moonlight Seminar 2025\", collaborative study group actuaries Institute Actuaries Japan focused advancing practical applications interpretable models.","code":""},{"path":[]},{"path":"https://ryo-asashi.github.io/midnight/reference/midnight-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"midnight: A Tidymodels Interface for the 'midr' Package — midnight-package","text":"Maintainer: Ryoichi Asashiba ryoichi.asashiba@gmail.com","code":""},{"path":"https://ryo-asashi.github.io/midnight/reference/persp.mid.html","id":null,"dir":"Reference","previous_headings":"","what":"Perspective Plot of MID Effects — persp.mid","title":"Perspective Plot of MID Effects — persp.mid","text":"Visualizes combined effect two variables \"mid\" object using 3D perspective plot.","code":""},{"path":"https://ryo-asashi.github.io/midnight/reference/persp.mid.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Perspective Plot of MID Effects — persp.mid","text":"","code":"# S3 method for class 'mid' persp(object, xvar, yvar = NULL, ..., xval = NULL, yval = NULL)"},{"path":"https://ryo-asashi.github.io/midnight/reference/persp.mid.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Perspective Plot of MID Effects — persp.mid","text":"object \"mid\" object, typically result midr::interpret(). xvar character string name variable x-axis. Alternatively, single string format xvar:yvar can provided, case yvar can omitted. yvar character string name variable y-axis. ... additional arguments passed graphics:::persp.default(). Used customize plot's appearance, view angles (theta, phi) color (col). xval numeric character vector specifying sequence values x-axis. yval numeric character vector specifying sequence values y-axis.","code":""},{"path":"https://ryo-asashi.github.io/midnight/reference/persp.mid.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Perspective Plot of MID Effects — persp.mid","text":"persp.mid() invisibly returns viewing transformation matrix, see persp details. function primarily called side effect creating plot.","code":""},{"path":"https://ryo-asashi.github.io/midnight/reference/persp.mid.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Perspective Plot of MID Effects — persp.mid","text":"S3 method persp() generic calculates sum main effects xvar yvar interaction effect (xvar:yvar). resulting sum plotted height z-axis.","code":""},{"path":[]},{"path":"https://ryo-asashi.github.io/midnight/reference/persp.mid.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Perspective Plot of MID Effects — persp.mid","text":"","code":"mid <- midr::interpret(mpg ~ wt * hp + factor(am), data = mtcars, lambda = .5) #> 'model' not passed: response variable in 'data' is used  # Create a basic perspective plot persp(mid, xvar = \"wt\", yvar = \"hp\")   # Customize the plot by passing arguments to graphics:::persp.default() persp(mid, \"wt\", \"hp\", theta = 210, phi = 20, col = \"lightblue\", shade = .5)  persp(mid, \"factor(am):wt\", theta = 210, shade = .2)"},{"path":"https://ryo-asashi.github.io/midnight/news/index.html","id":"midnight-development-version-010900-905","dir":"Changelog","previous_headings":"","what":"midnight (development version) 0.1.0.900-905","title":"midnight (development version) 0.1.0.900-905","text":"Renamed main functions (mid_surrogate() mid_reg()). Added persp.mid(). Added “moon” “moonlit” color themes Added package document. Updated wrapper fit function fit_mid_mid() improve memory efficiency. Opened pkgdown website added favicons. Added mid_surrogate() make_mid_mid(). Created package hex logo.","code":""}]
